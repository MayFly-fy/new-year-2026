<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°å¹´å¿«ä¹ï¼</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #a40000; font-family: "Microsoft YaHei", sans-serif; }
        #cover { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, #d40000, #800000); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; transition: opacity 0.8s; }
        .envelope { width: 150px; height: 150px; background: #ffcc00; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 80px; color: #a40000; cursor: pointer; animation: breathe 2s infinite; box-shadow: 0 0 30px rgba(255, 204, 0, 0.5); }
        @keyframes breathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .tap-hint { color: #ffcc00; margin-top: 20px; letter-spacing: 2px; text-align: center; }
        #content { display: none; padding: 40px 20px; text-align: center; color: #ffebad; }
        .year { font-size: 60px; font-weight: bold; margin-bottom: 10px; opacity: 0.3; }
        #blessing-text { font-size: 22px; line-height: 1.8; white-space: pre-wrap; text-align: left; display: inline-block; }
        .footer { position: fixed; bottom: 30px; width: 100%; text-align: center; font-size: 14px; opacity: 0.7; color: #ffcc00; }
    </style>
</head>
<body>

    <div id="cover" onclick="openBlessing()">
        <div class="envelope">ç¦</div>
        <p class="tap-hint" id="cover-hint">é€ç»™ä½ çš„æ–°å¹´ç¥ç¦<br>(ç‚¹å‡»å¼€å¯)</p>
    </div>

    <div id="content">
        <div class="year">2026</div>
        <div id="blessing-text"></div>
        <div class="footer">â€”â€” ä½ çš„å¥½å‹é€ä¸Š â€”â€”</div>
    </div>

    <script>
        // --- è¿™é‡Œçš„é…ç½®åŒºåŸŸä½ å¯ä»¥è‡ªç”±ä¿®æ”¹ ---
        const config = {
            // é»˜è®¤ç¥ç¦è¯­ï¼ˆå¦‚æœé“¾æ¥é‡Œæ²¡å¸¦åå­—ï¼Œå°±æ˜¾ç¤ºè¿™ä¸ªï¼‰
            "default": "äº²çˆ±çš„æœ‹å‹ï¼š\n\næ–°å¹´çš„é’Ÿå£°å³å°†æ•²å“ï¼Œ\næ„¿ä½ åœ¨2026å¹´é‡Œï¼š\nçœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±ï¼Œ\næ‰€æ±‚çš†å¦‚æ„¿ï¼Œæ‰€è¡Œçš†å¦é€”ã€‚\n\nå…ƒæ—¦å¿«ä¹ï¼ğŸ‰",
            
            // ä¸“å±ç¥ç¦è¯­åº“ï¼ˆåå­—è¦å’Œé“¾æ¥é‡Œçš„å¯¹åº”ï¼‰
            "messages": {
                "å°æ˜": "å˜¿ï¼Œå°æ˜ï¼\næ–°çš„ä¸€å¹´ç¥ä½ ï¼š\nä»£ç æ— Bugï¼Œå·¥èµ„ç¿»å‡ å€ï¼\næ—©æ—¥è„±å•ï¼Œæ¸¸æˆä¸Šåˆ†å¦‚å–æ°´ã€‚\nå’±ä»¬2026ç»§ç»­ä¸€èµ·å¼€é»‘ï¼ğŸ®",
                
                "ç‹å§": "äº²çˆ±çš„ç‹å§ï¼š\næ„Ÿè°¢ä½ è¿‡å»ä¸€å¹´çš„ç…§é¡¾ã€‚\nç¥ä½ åœ¨2026å¹´ï¼š\nå®¹é¢œæ°¸é©»ï¼Œå‡èŒåŠ è–ªï¼Œ\næ‰€æœ‰çš„çƒ¦æ¼éƒ½éšçƒŸèŠ±æ•£å»ï¼ğŸŒ¸",
                
                "é˜¿å¼º": "é˜¿å¼ºï¼š\nå¬è¯´ä½ 2026å¹´æœ‰ä¸ªå¤§è®¡åˆ’ï¼Ÿ\nç¥ä½ é©¬åˆ°æˆåŠŸï¼\nèº«ä½“å€å„¿æ£’ï¼Œåƒå˜›å˜›é¦™ï¼\nè·¨å¹´å¤œè®°å¾—å°‘å–ç‚¹ã€‚ğŸ»"
            }
        };

        // è·å–é“¾æ¥é‡Œçš„åå­—å‚æ•° (?to=åå­—)
        const urlParams = new URLSearchParams(window.location.search);
        const friendName = urlParams.get('to');

        // ä¿®æ”¹å°é¢æç¤ºè¯
        if (friendName) {
            document.getElementById('cover-hint').innerHTML = `é€ç»™ ${friendName} çš„ä¸“å±ç¥ç¦<br>(ç‚¹å‡»å¼€å¯)`;
        }

        function openBlessing() {
            document.getElementById('cover').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('cover').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                startTyping();
                launchConfetti();
            }, 800);
        }

        function startTyping() {
            // æ ¹æ®åå­—é€‰æ‹©ç¥ç¦è¯­
            const finalMessage = config.messages[friendName] || config.default;
            let i = 0;
            const container = document.getElementById('blessing-text');
            const timer = setInterval(() => {
                if (i < finalMessage.length) {
                    container.innerHTML += finalMessage.charAt(i);
                    i++;
                } else {
                    clearInterval(timer);
                    setInterval(launchConfetti, 3000);
                }
            }, 800 / (finalMessage.length / 10)); // è‡ªåŠ¨è°ƒæ•´æ‰“å­—é€Ÿåº¦
        }

        function launchConfetti() {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#ffcc00', '#ffffff', '#ff0000'] });
        }
    </script>
</body>
</html>
